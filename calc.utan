let loops = use("./loops.ğŸµ")
let lexer = use("./lexer.ğŸµ")
let parser = use("./parser.ğŸµ")
let environment = use("./environment.ğŸµ")
let evaluator = use("./evaluator.ğŸµ")

let while = loops.while;
let evaluate = evaluator.evaluate;
let input = readFile("math.utan"); // Ideally we'd have a better way to load input

let env = environment.newEnvironment({});
let l = lexer.newLexer(input);
let p = parser.newParser(l);

let program = p.parseProgram();
if (program.errors) {
    if (len(program.errors)) {
        map(program.errors, fn(e) { puts(e) })
    }
    puts(program);
} else {
    let evaluated = evaluate(program, env);
    puts(evaluated)
    if (evaluated != null) {
        puts(evaluated.toString());
    }
}



